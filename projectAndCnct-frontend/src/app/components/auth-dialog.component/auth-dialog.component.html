<div *ngIf="open"
  class="fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm"
  (click)="close()"
>

  <!-- Modal -->
  <div
    class="bg-white rounded-xl shadow-xl w-full max-w-md p-6 relative animate-fadeIn"
    (click)="$event.stopPropagation()"
  >

    <!-- Close Button -->
    <button
      (click)="close()"
      class="absolute top-3 right-3 text-gray-400 hover:text-black text-xl font-bold"
    >
      ✕
    </button>

    <!-- Header -->
    <div class="mb-4">
      <h2 class="text-xl font-bold">Bienvenue sur Project & Cnct</h2>
      <p class="text-gray-600 text-sm">
        Connectez-vous pour accéder à toutes les fonctionnalités
      </p>
    </div>

    <!-- Tabs -->
    <div class="flex mb-4 border-b">
      <button
        (click)="setTab('login')"
        [class.border-b-2]="activeTab === 'login'"
        class="flex-1 py-2 text-center font-medium hover:text-[#8c52ff]"
      >
        Connexion
      </button>

      <button
        (click)="setTab('signup')"
        [class.border-b-2]="activeTab === 'signup'"
        class="flex-1 py-2 text-center font-medium hover:text-[#8c52ff]"
      >
        Inscription
      </button>
    </div>

    <div class="max-h-[60vh] overflow-y-auto pr-2">
      <form
        *ngIf="activeTab === 'login'"
        [formGroup]="loginForm"
        (ngSubmit)="handleLogin()"
        class="space-y-4"
      >

        <div>
          <label class="text-sm font-medium">Email</label>
          <input
            type="email"
            formControlName="email"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
            placeholder="votre@email.com"
          />
        </div>

        <div>
          <label class="text-sm font-medium">Mot de passe</label>
          <input
            type="password"
            formControlName="password"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
            placeholder="••••••••"
          />
        </div>

        <div class="flex justify-between items-center text-sm">
          <label class="flex items-center gap-2">
            <input type="checkbox" formControlName="remember" />
            Se souvenir de moi
          </label>
          <a href="#" class="text-[#8c52ff] hover:underline">Mot de passe oublié ?</a>
        </div>

        <button
          type="submit"
          [disabled]="isLoading"
          class="w-full bg-[#8c52ff] hover:bg-purple-600 text-white py-2 rounded font-medium transition"
        >
          {{ isLoading ? 'Connexion...' : 'Se connecter' }}
        </button>

        <div class="text-center text-xs text-gray-500">Ou continuer avec</div>

        <div class="flex gap-2">
          <button
            type="button"
            class="flex-1 border py-2 rounded hover:bg-gray-100"
            (click)="handleSocialLogin('GitHub')"
          >
            GitHub
          </button>

          <button
            type="button"
            class="flex-1 border py-2 rounded hover:bg-gray-100"
            (click)="handleSocialLogin('Google')"
          >
            Google
          </button>
        </div>
      </form>

      <form
        *ngIf="activeTab === 'signup'"
        [formGroup]="signupForm"
        (ngSubmit)="handleSignup()"
        class="space-y-4"
      >

        <div>
          <label class="text-sm font-medium">Nom complet</label>
          <input
            type="text"
            formControlName="name"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
            placeholder="John Doe"
          />
        </div>

        <div>
          <label class="text-sm font-medium">Email</label>
          <input
            type="email"
            formControlName="email"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
          />
        </div>

        <div>
          <label class="text-sm font-medium">Mot de passe</label>
          <input
            type="password"
            formControlName="password"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
          />
        </div>

        <div>
          <label class="text-sm font-medium">Confirmer le mot de passe</label>
          <input
            type="password"
            formControlName="confirm"
            class="w-full border px-3 py-2 rounded focus:ring-2 focus:ring-[#8c52ff] outline-none"
          />
        </div>

        <label class="flex items-start gap-2 text-sm">
          <input type="checkbox" formControlName="accept" class="mt-1" />
          <span>
          J'accepte les
          <a href="#" class="text-[#8c52ff] hover:underline">conditions</a> et la
          <a href="#" class="text-[#8c52ff] hover:underline">politique</a>
        </span>
        </label>

        <button
          type="submit"
          [disabled]="isLoading"
          class="w-full bg-[#8c52ff] hover:bg-purple-600 text-white py-2 rounded font-medium transition"
        >
          {{ isLoading ? 'Création...' : 'Créer un compte' }}
        </button>

        <div class="text-center text-xs text-gray-500">Ou continuer avec</div>

        <div class="flex gap-2">
          <button
            type="button"
            class="flex-1 border py-2 rounded hover:bg-gray-100"
            (click)="handleSocialLogin('GitHub')"
          >
            GitHub
          </button>

          <button
            type="button"
            class="flex-1 border py-2 rounded hover:bg-gray-100"
            (click)="handleSocialLogin('Google')"
          >
            Google
          </button>
        </div>
      </form>
    </div>

  </div>
</div>
